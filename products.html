<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/base.css"/>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/products.css"/>
	</head>
	<body>
		<header id="header">全部贷款产品</header>
		<div class="loan-products">
			<div class="header">为您搜索贷款<span>20</span>个</div>
			<div id="wrapper">
				<div class="scroller">
					<ul id='list'>
						<li>
							<div class="productsImg">
								<img src="img/1.jpg"/>
							</div>
							<div class="productsContent">
								<p>浦发银行————万用金</p>
								<div class="productsContentTime clearfix">
									<span>1天放款</span>
									<strong><i>5.5%</i>年</strong>
								</div>
								<div class="productsContentMortgage clearfix">
									<span>房屋抵押</span><strong>可贷30-3000万</strong>
								</div>
							</div>
						</li>
						<li>
							<div class="productsImg">
								<img src="img/1.jpg"/>
							</div>
							<div class="productsContent">
								<p>浦发银行————万用金</p>
								<div class="productsContentTime clearfix">
									<span>1天放款</span>
									<strong><i>5.5%</i>年</strong>
								</div>
								<div class="productsContentMortgage clearfix">
									<span>房屋抵押</span><strong>可贷30-3000万</strong>
								</div>
							</div>
						</li>
						<li>
							<div class="productsImg">
								<img src="img/1.jpg"/>
							</div>
							<div class="productsContent">
								<p>浦发银行————万用金</p>
								<div class="productsContentTime clearfix">
									<span>1天放款</span>
									<strong><i>5.5%</i>年</strong>
								</div>
								<div class="productsContentMortgage clearfix">
									<span>房屋抵押</span><strong>可贷30-3000万</strong>
								</div>
							</div>
						</li>
						<li>
							<div class="productsImg">
								<img src="img/1.jpg"/>
							</div>
							<div class="productsContent">
								<p>浦发银行————万用金</p>
								<div class="productsContentTime clearfix">
									<span>1天放款</span>
									<strong><i>5.5%</i>年</strong>
								</div>
								<div class="productsContentMortgage clearfix">
									<span>房屋抵押</span><strong>可贷30-3000万</strong>
								</div>
							</div>
						</li>
						<li>
							<div class="productsImg">
								<img src="img/1.jpg"/>
							</div>
							<div class="productsContent">
								<p>浦发银行————万用金</p>
								<div class="productsContentTime clearfix">
									<span>1天放款</span>
									<strong><i>5.5%</i>年</strong>
								</div>
								<div class="productsContentMortgage clearfix">
									<span>房屋抵押</span><strong>可贷30-3000万</strong>
								</div>
							</div>
						</li>
						<li>
							<div class="productsImg">
								<img src="img/1.jpg"/>
							</div>
							<div class="productsContent">
								<p>浦发银行————万用金</p>
								<div class="productsContentTime clearfix">
									<span>1天放款</span>
									<strong><i>5.5%</i>年</strong>
								</div>
								<div class="productsContentMortgage clearfix">
									<span>房屋抵押</span><strong>可贷30-3000万</strong>
								</div>
							</div>
						</li>
						
					</ul>
					<div id="pullUp">
						<span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多...</span>
					</div>
				</div>
			</div>
			<!--<div class="more">
				没有更多了
			</div>-->
		</div>
		<footer id="footer" style="position: fixed;width:100%;bottom: 0;left: 0;">
			<div class="about"><a href="#">关于我们</a></div>
			<p class="company">
				<span>一粒控股(北京)有限公司</span>
				<span>京ICP备16060468号-1</span>
			</p>
			<div class="versions">
				<a href="#" class="tel">手机版</a>|
				<a href="#" class="mac">电脑版</a>
				<div class="logo"><i></i><span>爱房金</span></div>
			</div>
		</footer>
	</body>
	<script src="js/iscroll.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var myScroll,
				pullDownEl, pullDownOffset,
				pullUpEl, pullUpOffset;
				//generatedCount = 0;

			/**
			 * 下拉刷新 （自定义实现此方法）
			 * myScroll.refresh();  // 数据加载完成后，调用界面更新方法
			 */
			/*function pullDownAction() {
				setTimeout(function() { // <-- Simulate network congestion, remove setTimeout from production!
					var el, li, i;
					el = document.getElementById('thelist');

					for(i = 0; i < 3; i++) {
						li = document.createElement('li');
						li.innerText = '添加三冰 ' + (++generatedCount);
						el.insertBefore(li, el.childNodes[0]);
					}

					myScroll.refresh(); //数据加载完成后，调用界面更新方法 Remember to refresh when contents are loaded (ie: on ajax completion)
				}, 1000); // <-- Simulate network congestion, remove setTimeout from production!
			}*/

			/**
			 * 滚动翻页 （自定义实现此方法）
			 * myScroll.refresh();  // 数据加载完成后，调用界面更新方法
			 */
			function pullUpAction() {
				setTimeout(function() { // <-- Simulate network congestion, remove setTimeout from production!
					var el, li, i;
					el = document.getElementById('list');
					//每次添加三条
					for(i = 0; i < 3; i++) {
						li = document.createElement('li');
						li.innerHTML = `<div class="productsImg">
								<img src="img/1.jpg"/>
							</div>
							<div class="productsContent">
								<p>浦发银行</p>
								<div class="productsContentTime clearfix">
									<span>1天放款</span>
									<strong><i>5.5%</i>年</strong>
								</div>
								<div class="productsContentMortgage clearfix">
									<span>房屋抵押</span><strong>可贷30-3000万</strong>
								</div>
							</div>`;
						el.appendChild(li, el.childNodes[0]);
					}

					myScroll.refresh(); // 数据加载完成后，调用界面更新方法 Remember to refresh when contents are loaded (ie: on ajax completion)
				}, 1000); // <-- Simulate network congestion, remove setTimeout from production!
			}

			/**
			 * 初始化iScroll控件
			 */
			function loaded() {
//				pullDownEl = document.getElementById('pullDown');
//				pullDownOffset = pullDownEl.offsetHeight;//获取对象的滚动高度
				pullUpEl = document.getElementById('pullUp');
				pullUpOffset = pullUpEl.offsetHeight;

				myScroll = new iScroll('wrapper', {
					scrollbarClass: 'myScrollbar',//定义滚动条的样式名
					/* 重要样式 */
					useTransition: false,//是否使用css变形
					/* 此属性不知用意，本人从true改为false */
					topOffset: pullDownOffset,//已经滚动的基准值（一般用在拖动刷新）
					onRefresh: function() {//refresh的回调
						/*if(pullDownEl.className.match('loading')) {
							pullDownEl.className = '';
							pullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...';
						} else */if(pullUpEl.className.match('loading')) {
							pullUpEl.className = '';
							pullUpEl.querySelector('.pullUpLabel').innerHTML = '上拉加载更多...';
						}
					},
					onScrollMove: function() {//内容移动的回调
						/*if(this.y > 5 && !pullDownEl.className.match('flip')) {
							pullDownEl.className = 'flip';
							pullDownEl.querySelector('.pullDownLabel').innerHTML = '松手开始更新...';
							this.minScrollY = 0;
						} else if(this.y < 5 && pullDownEl.className.match('flip')) {
							pullDownEl.className = '';
							pullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...';
							this.minScrollY = -pullDownOffset;
						} else */if(this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {
							pullUpEl.className = 'flip';
							pullUpEl.querySelector('.pullUpLabel').innerHTML = '松手开始更新...';
							this.maxScrollY = this.maxScrollY;
						} else if(this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {
							pullUpEl.className = '';
							pullUpEl.querySelector('.pullUpLabel').innerHTML = '上拉加载更多...';
							this.maxScrollY = pullUpOffset;
						}
					},
					onScrollEnd: function() {
						/*if(pullDownEl.className.match('flip')) {
							pullDownEl.className = 'loading';
							pullDownEl.querySelector('.pullDownLabel').innerHTML = '加载中...';
							pullDownAction(); // Execute custom function (ajax call?)
						} else */if(pullUpEl.className.match('flip')) {
							pullUpEl.className = 'loading';
							pullUpEl.querySelector('.pullUpLabel').innerHTML = '加载中...';
							pullUpAction(); // Execute custom function (ajax call?)
						}else{
							pullUpEl.className = '';
							pullUpEl.querySelector('.pullUpLabel').innerHTML = '没有更多数据了';
							return false;
						}
					}
				});

				setTimeout(function() { document.getElementById('wrapper').style.left = '0'; }, 800);
			}

			//初始化绑定iScroll控件 
			document.addEventListener('touchmove', function(e) { e.preventDefault(); }, false);
			document.addEventListener('DOMContentLoaded', loaded, false);
		</script>
</html>
